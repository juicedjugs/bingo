import{a as g,p as t,w as j}from"./chunk-QMGIS6GS-BQ5ZSHI-.js";import{D as T,r as v,S as B,V as D,a as y,g as w,B as A}from"./Viewspace-D_v2HSuN.js";import{b as W,c as E,T as N}from"./state-CSx9Bxjn.js";import{j as u}from"./Box-Be1EMmzP.js";import"./iconify-CZhN-2v0.js";import"./index-DUuVLYlT.js";function C(){const{state:r,reorderBingoBoard:b,assignTileIdeaToBingoTile:f}=W(),{tileIdeas:h}=E(),[P,m]=g.useState(null),[x,l]=g.useState(null),[p,d]=g.useState(null),[n,c]=g.useState(null),S=i=>{if(m(i.active),i.active.id.toString().startsWith("tile-idea-"))l("tile-idea"),d(i.active.data?.current?.tileIdea),c(null);else if(i.active.id.toString().startsWith("bingo-")){l("bingo-tile");const o=Number(i.active.id.toString().replace("bingo-","")),e=r.bingoBoard[o],s=h.find(a=>a.id===e.id);c(s?{...s,scale:r.scale,id:e.id}:{id:"",description:"",items:[],scale:r.scale}),d(null)}else l(null),d(null),c(null)},I=i=>{m(null),l(null),d(null),c(null);const{active:o,over:e}=i;if(e){if(o.id.toString().startsWith("bingo-")&&e.id.toString().startsWith("bingo-")){const s=Number(o.id.toString().replace("bingo-","")),a=Number(e.id.toString().replace("bingo-",""));s!==a&&b(s,a)}if(o.id.toString().startsWith("tile-idea-")&&e.id.toString().startsWith("bingo-")){const s=i.active.data?.current?.tileIdea?.id,a=Number(e.id.toString().replace("bingo-",""));s&&f(a,s)}}};return t.jsx(T,{collisionDetection:v,onDragEnd:I,onDragStart:S,children:t.jsxs(N,{children:[t.jsxs(u,{sx:{display:"flex"},children:[t.jsx(B,{tab:"board"}),t.jsx(D,{tab:"board"})]}),t.jsxs(y,{dropAnimation:null,children:[x==="tile-idea"&&p?t.jsxs(u,{sx:{background:"#222",color:"#fff",borderRadius:2,boxShadow:3,p:2,minWidth:120,minHeight:60,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",opacity:.95},children:[t.jsx(u,{children:p.description}),t.jsx(u,{sx:{display:"flex",gap:1,mt:1},children:p.items?.slice(0,3).map(i=>t.jsx("img",{src:w(i),alt:i,height:28,width:28,style:{filter:"drop-shadow(0 0 2px #000000)"}},i))})]}):null,x==="bingo-tile"&&n?t.jsx(A,{id:n.id,description:n.description,items:n.items,scale:n.scale,row:0,col:0,dimension:1,forceAllBorders:!0,tileIndex:0}):null]})]})})}const U=j(function(){return t.jsx(C,{})});export{U as default};
