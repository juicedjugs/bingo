import{a as m,p as e}from"./chunk-QMGIS6GS-BQ5ZSHI-.js";import{D as I,r as f,S,V as T,a as v,P as h}from"./Viewspace-D_v2HSuN.js";import{b as D,c as b,T as j}from"./state-CSx9Bxjn.js";import{j as P}from"./Box-Be1EMmzP.js";function w(){const{state:E,assignPlayerToTeam:l,reorderPlayersInTeam:p}=D(),{tileIdeas:W}=b(),[r,d]=m.useState(null),[x,o]=m.useState(null),y=n=>{d(n.active),n.active.id.toString().startsWith("player-")?o("player"):o(null)},g=n=>{d(null),o(null);const{active:s,over:t}=n;if(t){if(s.id.toString().startsWith("player-")&&t.id.toString().startsWith("team-")){const a=n.active.data?.current?.playerIndex,c=Number(t.id.toString().replace("team-",""));if(typeof a=="number"){const i=String(c);l(a,i)}}if(s.id.toString().startsWith("player-")&&t.id.toString()==="unassign-players"){const a=n.active.data?.current?.playerIndex;typeof a=="number"&&l(a,null)}if(s.id.toString().startsWith("player-")&&t.id.toString().startsWith("player-")&&s.data?.current?.canReorder&&t.data?.current?.canReorder){const a=s.data.current.teamIndex,c=t.data.current.teamIndex,i=s.data.current.positionInTeam,u=t.data.current.positionInTeam;a===c&&i!==u&&p(String(a),i,u)}}};return e.jsx(I,{collisionDetection:f,onDragEnd:g,onDragStart:y,children:e.jsxs(j,{children:[e.jsxs(P,{sx:{display:"flex"},children:[e.jsx(S,{tab:"teams"}),e.jsx(T,{tab:"teams"})]}),e.jsx(v,{dropAnimation:null,children:x==="player"&&r?e.jsx(h,{username:r.data?.current?.username||"Player",combatLevel:r.data?.current?.combatLevel||null,isLoading:r.data?.current?.isLoading||!1,hasError:r.data?.current?.hasError||!1,stats:r.data?.current?.stats||null}):null})]})})}export{w as T};
